<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Unit test file Form | FuseJS Alpha</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <script type="text/javascript">
    var eventResults = { 'currentTarget': { } };
  </script>
  <script src="../../../dist/fuse.js" type="text/javascript"></script>
  <script src="../assets/unittest.js" type="text/javascript"></script>
  <script type="text/javascript">
    var undef, nil = null,
     $  = fuse.util.$,
     $$ = fuse.util.$$,
     $A = fuse.util.$A,
     $F = fuse.util.$F,
     $H = fuse.util.$H,
     $R = fuse.util.$R,
     $w = fuse.util.$w;

    fuse(document).observe('dom:loaded', function() {
      var engineItem,

      refresh = function() {
        var loc = window.location;
        loc.replace(loc.protocol + '//' + loc.hostname + loc.pathname +
          '?engine=' + engineEl.raw.options[engineEl.raw.selectedIndex].text +
          '&debug='  + $F(debugEl));
      },

      getQueryParam = function(key, defaultValue) {
        var pattern = new RegExp('[?&]' + key + '=([^&]+)');
        return (window.location.href.match(pattern) || [0, defaultValue])[1];
      }

      loadScriptFile = (function() {
        var head = fuse(document.getElementsByTagName('HEAD')[0]);
        return function(url) {
          fuse.ajax.Request(url, {
            'method': 'get',
            'evalJS': false,
            'asynchronous': false,
            'onDone': function(response) {
              head.insert('<script>' + response.responseText + '<\/script>');
            }
          });
        };
      })(),

      i           = -1,
      expando     = '_fuse' + String(+new Date).slice(0, 10),
      debugParam  = getQueryParam('debug', '0') == 1,
      engineParam = getQueryParam('engine', 'NWMatcher'),
      debugEl     = $('debug-switch'),
      engineEl    = $('selector-engine'),
      engineItems = engineEl.raw.options;

      // set active debug state in it's dropdown list
      debugEl.setValue(debugParam ? '1' : '0');

      // set active css engine in it's dropdown list
      while (engineItem = engineItems[++i]) {
        if (engineItem.text === engineParam) {
          engineItems[engineEl.raw.selectedIndex = i];
          break;
        }
      }

      // set debug flag
      fuse.debug = debugParam;

      // load selector engine and Fuse engine adapter
      fuse.String(engineItem.value).split('+').each(function(path) {
        loadScriptFile('../../../../vendor/' + path);
      });

      loadScriptFile('../../../../src/dom/selector/' + engineItem.text.toLowerCase() + '.js');

      // attach event handlers to config controls
      debugEl.observe('change', refresh);
      engineEl.observe('change', refresh);
    });
  </script>

  <link rel="stylesheet" href="../assets/test.css" type="text/css">

  <script src="../src/fixtures/form.js" type="text/javascript" charset="utf-8"></script>

  <script src="../src/form_test.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
<h1>FuseJS Unit test file</h1>

<!-- CSS wizards feel free to clean this up -->
<h2 style="display:inline;">Form</h2>

<!-- CSS Selector Engine List -->
<span style="margin-left:10px;">Selector Engine:
<select id="selector-engine">
  <option value="acme/acme.js">Acme</option>
  <option value="domquery/DomQuery.js">DomQuery</option>
  <option value="nwbox/nwmatcher/src/nwmatcher.js">NWMatcher</option>
  <option value="peppy/peppy.js">Peppy</option>
  <option value="sizzle/sizzle.js">Sizzle</option>
  <option value="slick/Slick.Parser.js+slick/Slick.Finder.js">Slick</option>
  <option value="sly/Sly.js">Sly</option>
</select>
</span>

<!-- Debug Switch -->
<span style="margin-left:10px;">Debug Mode:
<select id="debug-switch">
  <option value="0">Off</option>
  <option value="1">On</option>
</select>
</span>

<!-- This file is programmatically generated. Do not attempt to modify it. Instead, modify  -->

<!-- Log output start -->
<div id="testlog"></div>
<!-- Log output end -->

<!-- HTML Fixtures start -->
<form id="form" method="get" action="../src/fixtures/empty.js">
  <input type="text" name="val1" id="input_enabled" value="4">
  <div>This is not a form element</div>
  <input type="text" name="val2" id="input_disabled" disabled="disabled" value="5">
  <input type="submit" name="first_submit" value="Commit it!">
  <input type="submit" name="second_submit" value="Delete it!">
  <input type="text" name="action" value="blah">
</form>

<form id="bigform" method="get" action="fixtures/empty.js">
  <div id="inputs">
    <input type="text"   name="dummy"  id="dummy_disabled" disabled="disabled">
    <input type="submit" name="commit" id="submit">
    <input type="image"  name="commit_img" id="input_image" src="../src/fixtures/logo.gif" value="1">
    <input type="button" name="clicky" value="click me">
    <input type="reset"  name="revert">
    <input type="text"   name="greeting" id="focus_text" value="Hello">
    <input type="search" name="search" id="search" value="search">
  </div>

  <!-- some edge cases in serialization -->
  <div id="value_checks">
    <input name="twin" type="text" value=""> 
    <input name="twin" type="text" value="siamese">
    <!-- Rails checkbox hack with hidden input: -->
    <input name="checky" type="checkbox" id="checkbox_hack" value="1"> 
    <input name="checky" type="hidden" value="0">
  </div>

  <div id="button_elements">
    <button type="button" id="button_button" name="bu_button" value="1">
      <img src="../src/fixtures/logo.gif">
      Button
    </button>
    <button type="button" id="button_novalue" name="bu_novalue" >
      <img src="../src/fixtures/logo.gif">
      No Value
    </button>
    <button type="submit" id="button_submit" name="bu_submit" value="1">
      <img src="../src/fixtures/logo.gif">
      Submit
    </button>
    <button type="reset" id="button_reset" name="bu_reset" value="1">
      <img src="../src/fixtures/logo.gif">
      Reset
    </button>
  </div>

  <!-- all variations of SELECT controls -->
  <div id="selects_wrapper">
    <select name="vu">
       <option value="1" selected="selected">One</option>
       <option value="2">Two</option>
       <option value="3">Three</option>
    </select>
    <select id="multiSel1" name="vm[]" multiple="multiple">
       <option id="multiSel1_opt1" value="1" selected="selected">One</option>
       <option id="multiSel1_opt2" value="2">Two</option>
       <option id="multiSel1_opt3" value="3" selected="selected">Three</option>
    </select>
    <select name="nvu">
       <option selected="selected">One</option>
       <option value="2">Two</option>
       <option value="3">Three</option>
    </select>

    <fieldset id="selects_fieldset">
      <select name="nvm[]" multiple="multiple">
         <option selected="selected">One</option>
         <option>Two</option>
         <option selected="selected">Three</option>
      </select>
      <select name="evu">
         <option value="" selected="selected">One</option>
         <option value="2">Two</option>
         <option value="3">Three</option>
      </select>
      <select name="evm[]" multiple="multiple">
         <option value="" selected="selected">One</option>
         <option>Two</option>
         <option selected="selected">Three</option>
      </select>
    </fieldset>
  </div>

  <div id="various">
    <select name="tf_selectOne"><option selected="selected"></option><option>1</option></select>
    <textarea name="tf_textarea"></textarea>
    <input type="checkbox" name="tf_checkbox" value="on">
    <select name="tf_selectMany" multiple="multiple"></select>
    <input type="text" name="tf_text">
    <div>This is not a form element</div>
    <input type="radio" name="tf_radio" value="on">
    <input type="hidden" name="tf_hidden">
    <input type="password" name="tf_password">
  </div>
</form>

<form id="form_with_control_groups">
  <input type="radio" name="group_radio" value="1r">
  <input type="radio" name="group_radio" value="2r" checked>
  <input type="radio" name="group_radio" value="3r">
  <input type="checkbox" name="group_checkbox" value="1c">
  <input type="checkbox" name="group_checkbox" value="2c" checked>
  <input type="checkbox" name="group_checkbox" value="3c">
</form>

<form id="form_focus_hidden" style="display: none">
  <input type="text">
</form>

<form id="form_empty">
</form>

<form id="form_with_file_input">
  <input type="file" name="file_name" value="foo">
</form>

<form id="form_with_object_prototypes">
  <input type="text" name="length">
  <input type="text" name="toString">
  <input type="text" name="valueOf">
</form>

<!-- tabindexed forms -->
<div id="tabindex">
  <form id="ffe">
    <p><input type="text" disabled="disabled" id="ffe_disabled"></p>
    <input type="hidden" id="ffe_hidden">
    <input type="checkbox" id="ffe_checkbox">
  </form>

  <form id="ffe_ti">
    <p><input type="text" disabled="disabled" id="ffe_ti_disabled"></p>
    <input type="hidden" id="ffe_ti_hidden">
    <input type="checkbox" id="ffe_ti_checkbox">
    <input type="submit" id="ffe_ti_submit" tabindex="1">
  </form>

  <form id="ffe_ti2">
    <p><input type="text" disabled="disabled" id="ffe_ti2_disabled"></p>
    <input type="hidden" id="ffe_ti2_hidden">
    <input type="checkbox" id="ffe_ti2_checkbox" tabindex="0">
    <input type="submit" id="ffe_ti2_submit" tabindex="1">
  </form>
  
</div>

<!-- HTML Fixtures end -->

<script type="text/javascript">
  eventResults.endOfDocument = true;
</script>
</body>
</html>