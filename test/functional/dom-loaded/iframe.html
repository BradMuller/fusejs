<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title></title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<script src="../../../dist/fuse.js" type="text/javascript"></script>
<script src="../../../vendor/nwbox/nwmatcher/src/nwmatcher.js"></script>
<script type="text/javascript">
  // If any of the following lines are uncommented, then it
  // will take 9-14 seconds for polling to succeed.
  // window.top;
  // window.parent;

  document.domain = 'localhost';

  function time() {
    return (new Date()).getTime();
  }

  var start = time();
  var attempts = 0;

  function poll() {
    attempts++;
    var result;
    try {
      window.frameElement;
      // Success! Show the time taken.
      alert('window.frameElement accessed in ' + attempts + ' attempts and ' + (time() - start) + 'ms');
    } catch (e /* Access is denied */ ) {
      // Failure. Try again in 100ms.
      setTimeout(poll, 100);
    }
  }

  poll();
</script>
</head>
<body>
  <h2>There should be no delay in the alert</h2>
</body>
</html>